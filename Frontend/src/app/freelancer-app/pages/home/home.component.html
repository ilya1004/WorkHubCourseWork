<div nz-flex nzAlign="center" nzGap="40px">
  <nz-form-item>
    <nz-form-label>Title</nz-form-label>
      <input
        nz-input
        [(ngModel)]="filterForm.title"
        placeholder="Search by title"
        style="width: 180px"/>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label>Budget Range</nz-form-label>
    <nz-input-group>
      <input
        nz-input
        type="number"
        [(ngModel)]="filterForm.budgetFrom"
        placeholder="From"
        style="width: 100px"/>
      <input
        nz-input
        type="number"
        [(ngModel)]="filterForm.budgetTo"
        placeholder="To"
        style="margin-left: 15px; width: 100px"/>
    </nz-input-group>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label>Category</nz-form-label>
    <nz-select
      [(ngModel)]="filterForm.categoryId"
      nzPlaceHolder="Select category"
      style="width: 190px">
      <nz-option *ngFor="let category of categories" [nzValue]="category.id" [nzLabel]="category.name"></nz-option>
    </nz-select>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label>Status</nz-form-label>
    <nz-select
      [(ngModel)]="filterForm.projectStatus"
      nzPlaceHolder="Select status"
      style="width: 190px">
      <nz-option
        *ngFor="let status of projectStatuses"
        [nzValue]="status.value"
        [nzLabel]="status.label">
      </nz-option>
    </nz-select>
  </nz-form-item>

  <div nz-flex nzGap="10px" nzJustify="center" style="min-width: 200px; margin: 8px 0 0 0" >
    <button
      nz-button
      nzType="primary"
      (click)="applyFilters()">
      Apply Filters
    </button>
    <button
      nz-button
      (click)="resetFilters()">
      Reset
    </button>
  </div>
</div>

<nz-table
  #projectTable
  [nzData]="projects"
  [nzLoading]="loading"
  [nzFrontPagination]="false"
  [nzTotal]="totalCount"
  [nzPageSize]="filterForm.pageSize"
  [nzPageIndex]="filterForm.pageNo"
  (nzPageIndexChange)="onPageChange($event)"
  (nzPageSizeChange)="onPageSizeChange($event)">
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Budget (EUR)</th>
      <th>Category</th>
      <th>Status</th>
      <th>Created At</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let project of projectTable.data">
      <td>{{project.id}}</td>
      <td>{{project.title}}</td>
      <td>{{project.budget}}</td>
      <td>{{project.categoryName || 'None'}}</td>
      <td>{{getStatusLabel(project.projectStatus)}}</td>
      <td>{{project.createdAt | date}}</td>
      <td>
        <button
          nz-button
          nzType="default"
          (click)="navigateToProject(project.id)">
          Details
        </button>
      </td>
    </tr>
  </tbody>
</nz-table>