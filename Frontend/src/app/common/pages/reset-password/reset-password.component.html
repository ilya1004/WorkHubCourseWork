<div nz-flex nzJustify="center" class="reset-password-container">
  <nz-card class="reset-password-card">
    <h2 style="color: var(--white-color)">Reset Password</h2>
    <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
      <nz-space nzSize="middle" nzDirection="vertical">
        <div *nzSpaceItem>
          <input
            nz-input
            formControlName="email"
            placeholder="Enter your email"
            class="reset-password-card__input" />
          <div *ngIf="resetPasswordForm.controls.email.invalid && resetPasswordForm.controls.email.touched" class="input-error-message">
            <div *ngIf="resetPasswordForm.controls.email.errors?.['required']">Email is required</div>
            <div *ngIf="resetPasswordForm.controls.email.errors?.['email']">Invalid email format</div>
          </div>
        </div>
        
        <div *nzSpaceItem>
          <nz-input-group [nzSuffix]="newPasswordSuffixTemplate" class="reset-password-card__input">
            <input
              nz-input
              formControlName="newPassword"
              [type]="newPasswordVisible ? 'text' : 'password'"
              placeholder="Enter new password"
              style="background-color: inherit; color: inherit" />
          </nz-input-group>
          <ng-template #newPasswordSuffixTemplate>
            <nz-icon
              class="ant-input-password-icon"
              [nzType]="newPasswordVisible ? 'eye-invisible' : 'eye'"
              nzTheme="outline"
              (click)="newPasswordVisible = !newPasswordVisible"
              style="color: var(--white-color)" />
          </ng-template>
          <div *ngIf="resetPasswordForm.controls.newPassword.invalid && resetPasswordForm.controls.newPassword.touched" class="input-error-message">
            <div *ngIf="resetPasswordForm.controls.newPassword.errors?.['required']">Password is required</div>
            <div *ngIf="resetPasswordForm.controls.newPassword.errors?.['minlength']">Password must be at least 8 characters</div>
            <div *ngIf="resetPasswordForm.controls.newPassword.errors?.['pattern']">Password must include a lowercase, uppercase, number, and special character</div>
          </div>
        </div>
        
        <div *nzSpaceItem>
          <nz-input-group [nzSuffix]="confirmPasswordSuffixTemplate" class="reset-password-card__input">
            <input
              nz-input
              formControlName="confirmPassword"
              [type]="confirmPasswordVisible ? 'text' : 'password'"
              placeholder="Confirm new password"
              style="background-color: inherit; color: inherit" />
          </nz-input-group>
          <ng-template #confirmPasswordSuffixTemplate>
            <nz-icon
              class="ant-input-password-icon"
              [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'"
              nzTheme="outline"
              (click)="confirmPasswordVisible = !confirmPasswordVisible"
              style="color: var(--white-color)" />
          </ng-template>
          <div *ngIf="resetPasswordForm.errors?.['mismatch'] && resetPasswordForm.controls.confirmPassword.touched" class="input-error-message">
            Passwords do not match
          </div>
        </div>
        
        <div *nzSpaceItem>
          <button
            nz-button
            nzType="primary"
            type="submit"
            [disabled]="resetPasswordForm.invalid || isLoading"
            style="border-radius: 7px;">
            <nz-spin *ngIf="isLoading" nzSimple></nz-spin>
            Reset Password
          </button>
        </div>
        
        <div *nzSpaceItem>
          <button
            nz-button
            nzType="link"
            nzSize="small"
            style="padding: 0 0 0 0"
            [routerLink]="'/login'">
            Back to Login
          </button>
        </div>
      </nz-space>
    </form>
  </nz-card>
</div>